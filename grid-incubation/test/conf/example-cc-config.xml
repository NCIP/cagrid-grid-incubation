<cruisecontrol>
    <property environment="env" toupper="true"/>

    <!-- Allow overrides -->
    <property file="cc.config.properties"/>

    <property name="cc.home" value="${env.CRUISE_HOME}"/>
    <property name="cc.work" value="${env.CRUISE_WORK}"/>
    <property name="ant.home" value="${env.ANT_HOME}"/>

    <property name="mail.host" value="smtp.bmi.ohio-state.edu"/>
    <property name="mail.list" value="cagrid-1-0-quality@gforge.nci.nih.gov"/>
    <property name="mail.return.addr" value="oster@bmi.osu.edu"/>

    <property name="project.dir" value="${cc.work}/checkout/${project.name}"/>
    <property name="log.dir" value="${cc.work}/logs/${project.name}"/>
    <property name="test.lost.dir" value="${project.dir}/caGrid/test/logs/"/>


    <!-- Preconfigure the plugins -->
    <plugin name="log" dir="${log.dir}"/>
    <plugin name="currentbuildstatuslistener" file="${log.dir}/buildstatus.txt"/>
    <plugin name="cvs" localworkingcopy="${project.dir}"/>
    <plugin name="ant" anthome="${env.ANT_HOME}" buildfile="build-${project.name}.xml" target="test"
        uselogger="true" usedebug="false" timeout="2000"/>
    <plugin name="antpublisher" buildfile="${project.dir}/caGrid/build.xml" target="ccpublish"/>
    <plugin name="htmlemail" skipusers="true" reportsuccess="fixes"
        buildresultsurl="http://${env.HOSTNAME}:8080/cruisecontrol/buildresults/${project.name}"
        mailhost="${mail.host}" returnaddress="${mail.return.addr}"
        css="${cc.home}/reporting/jsp/webcontent/css/cruisecontrol.css"
        xsldir="${cc.home}/reporting/jsp/webcontent/xsl" logdir="${log.dir}"/>



    <plugin name="continuous.project" classname="net.sourceforge.cruisecontrol.ProjectConfig">
        <dateformat format="yyyy-MM-dd'T'HH:mm:ss.SZ"/>
        <listeners>
            <currentbuildstatuslistener/>
        </listeners>
        <bootstrappers/>
        <modificationset quietperiod="30">
            <cvs/>
        </modificationset>
        <schedule interval="60">
            <ant>
                <jvmarg arg="-Xmx512m"/>
            </ant>
        </schedule>
        <log>
            <merge dir="${test.lost.dir}/junit"/>
            <merge file="${test.lost.dir}/BuildNameContinuous.xml"/>
        </log>
        <publishers>
            <htmlemail>
                <failure address="${mail.list}" reportWhenFixed="true"/>
            </htmlemail>
            <antpublisher/>
        </publishers>
    </plugin>

    <plugin name="nightly.project" classname="net.sourceforge.cruisecontrol.ProjectConfig">
        <dateformat format="yyyy-MM-dd'T'HH:mm:ss.SZ"/>
        <listeners>
            <currentbuildstatuslistener/>
        </listeners>
        <bootstrappers/>
        <modificationset quietperiod="30">
            <alwaysbuild/>
        </modificationset>
        <schedule interval="300">
            <ant time="0400" timeout="2000">
                <jvmarg arg="-Xmx512m"/>
            </ant>
        </schedule>
        <log>
            <merge dir="${test.lost.dir}/junit"/>
            <merge file="${test.lost.dir}/BuildNameNightly.xml"/>
        </log>
        <publishers>
            <htmlemail>
                <failure address="${mail.list}" reportWhenFixed="true"/>
            </htmlemail>
            <antpublisher/>
        </publishers>
    </plugin>

    <plugin name="system.project" classname="net.sourceforge.cruisecontrol.ProjectConfig">
        <dateformat format="yyyy-MM-dd'T'HH:mm:ss.SZ"/>
        <listeners>
            <currentbuildstatuslistener/>
        </listeners>
        <bootstrappers/>
        <modificationset quietperiod="30">
            <cvs/>
        </modificationset>
        <schedule interval="7200">
            <ant time="0400" timeout="2000">
                <jvmarg arg="-Xmx512m"/>
            </ant>
        </schedule>
        <log>
            <merge dir="${test.lost.dir}/junit"/>
            <merge file="${test.lost.dir}/BuildNameSystem.xml"/>
        </log>
        <publishers>
            <htmlemail>
                <failure address="${mail.list}" reportWhenFixed="true"/>
            </htmlemail>
            <antpublisher/>
        </publishers>
    </plugin>

    <!-- Make as many of these as you like -->

    <!--
    <continuous.project name="caGrid-1.0-continuous" buildafterfailed="false"/>
    <nightly.project name="caGrid-1.0-nightly" buildafterfailed="false"/>
    <nightly.project name="caGrid-1.0-release-nightly" buildafterfailed="false"/>
    <nightly.project name="caGrid-1.1-release-nightly" buildafterfailed="false"/>
    <nightly.project name="caGrid-1.2-release-nightly" buildafterfailed="false"/>
    <system.project name="caGrid-1.0-system" buildafterfailed="false"/>
    <system.project name="caGrid-1.1-release-system" buildafterfailed="false">
        <modificationset>
            <cvs tag="caGrid-1_1_release"/>
        </modificationset>
    </system.project>
    <system.project name="caGrid-1.2-release-system" buildafterfailed="false">
        <modificationset>
            <cvs tag="caGrid-1_2_release"/>
        </modificationset>
    </system.project>
    -->

</cruisecontrol>
