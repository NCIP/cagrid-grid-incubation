
<project name="ivyexamples-discovery-remote-ivy" default="all" xmlns:ivy="antlib:org.apache.ivy.ant">
	<!-- import the master build -->
	<import file="build.xml" />

	<!-- define the Ivy ant tasks -->
	<taskdef resource="org/apache/ivy/ant/antlib.xml" uri="antlib:org.apache.ivy.ant">
		<classpath>
			<fileset dir="${lib.dir}" includes="ivy-*.jar" />
		</classpath>
	</taskdef>

	<!-- the remote repository url -->
	<property name="ivy.settings.url" value="http://software.cagrid.org/repository-1.2/ivysettings.xml" />
	<ivy:settings id="ivy.instance" url="${ivy.settings.url}" override="true" />

	<!-- resolve dependencies with ivy -->
	<target name="ivy-resolve" description="--> retreive dependencies with ivy">
		<ivy:retrieve type="jar" />
	</target>

	<!-- generate a report of ivy's activities -->
	<target name="ivy-report" depends="ivy-resolve" description="--> generates a report of dependencies">
		<ivy:report todir="${build.dir}" />
	</target>

	<!-- clean up the libraries ivy retrieved -->
	<target name="ivy-clean" description="--> cleans all the libraries which were retrieved for the project">
		<delete includeemptydirs="true" failonerror="false">
			<fileset dir="${lib.dir}">
				<include name="**/*" />
				<exclude name="ivy*.jar" />
			</fileset>
		</delete>
		<ivy:cleancache />
	</target>

	<target name="all" depends="ivy-clean,ivy-resolve,ivy-report" />
</project>